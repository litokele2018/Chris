(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c66e91c"],{"19dd":function(t,e,s){"use strict";var i=s("8a35"),n=s.n(i);n.a},"1d45":function(t,e,s){"use strict";var i=s("be42"),n=s.n(i);n.a},"274c":function(t,e,s){"use strict";var i=s("651a"),n=s.n(i);n.a},"2a51":function(t,e,s){"use strict";var i=s("5555"),n=s.n(i);n.a},"2d80":function(t,e,s){},"36b8":function(t,e,s){"use strict";var i=s("81d3"),n=s.n(i);n.a},"39ea":function(t,e,s){},"4a22":function(t,e,s){},5555:function(t,e,s){},"589d":function(t,e,s){},"651a":function(t,e,s){},"6a93":function(t,e,s){"use strict";s("b0c0");function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=s("1bab");function a(t){return Object(n["a"])({url:"/detail",params:{iid:t}})}function o(t,e){return Object(n["a"])({url:"/home/data",params:{type:t,page:e}})}s.d(e,"c",(function(){return a})),s.d(e,"d",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return c})),s.d(e,"e",(function(){return l})),s.d(e,"f",(function(){return d}));var r=function t(e,s,n){i(this,t),this.title=s.title,this.price=s.price,this.oldPrice=s.oldPrice,this.topImage=s.topImages[0],this.lowNowPrice=s.lowNowPrice,this.discountDesc=s.discountDesc,this.sellNum=e[0],this.fav=e[1],this.serviceInfo=n[0].name,this.services=n,this.deliveryTime=s.extra.deliveryTime},c=function t(e){i(this,t),this.shopLogo=e.shopLogo,this.name=e.name,this.cSells=e.cSells,this.cGoods=e.cGoods,this.score=e.score,this.shopUrl=e.shopUrl},l=function t(e){i(this,t),this.set=e.info.set,this.tables=e.rule.tables},d=function t(e){i(this,t),this.content=e.list[0].content,this.createdTime=e.list[0].created,this.explain=e.list[0].explain,this.style=e.list[0].style,this.userAvatar="http:"+e.list[0].user.avatar,this.userName=e.list[0].user.uname,this.imgs=e.list[0].images}},"6ab7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"detail"}},[s("detail-nav-bar",{ref:"dNavBar",staticClass:"detail-nav-bar",on:{titleClick:t.titleClick}}),s("scroll",{ref:"dScroll",staticClass:"d-scroll",attrs:{"probe-type":3},on:{scroll:t.detailScrolling}},[s("detail-swiper",{attrs:{topImage:t.topImage}}),s("detail-info",{attrs:{goods:t.goods}}),s("detail-shop",{attrs:{shop:t.shop}}),s("detail-products",{attrs:{info:t.info},on:{dpImgLoad:t.dpImgLoad}}),s("detail-params",{ref:"dParams",attrs:{iparams:t.iparams}}),s("detail-comment",{ref:"dComments",attrs:{comments:t.comments},on:{commentImgRefresh:t.commentImgRefresh}}),s("div",{ref:"dRecommends",staticClass:"pop-recomments"},[t._v("热门推荐")]),s("goods-list",{attrs:{goods:t.goodsList.pop}})],1),s("back-to-top",{directives:[{name:"show",rawName:"v-show",value:t.showBackToTop,expression:"showBackToTop"}],nativeOn:{click:function(e){return t.back(e)}}}),s("detail-bottom-bar",{on:{addToCart:t.addToCart}})],1)},n=[],a=(s("b0c0"),s("2909")),o=s("6a93"),r=s("90b9"),c=s("5d17"),l=s("eecb"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"detail-nav-bar"}},[i("nav-bar",[i("div",{staticClass:"dt-img",attrs:{slot:"left"},on:{click:t.back},slot:"left"},[i("img",{attrs:{src:s("7a74"),alt:""}})]),i("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},t._l(t.titles,(function(e,s){return i("div",{key:s,staticClass:"title-item",class:{active:s===t.currentIndex},on:{click:function(e){return t.handleClick(s)}}},[t._v(t._s(e)+" ")])})),0)])],1)},u=[],f=s("e47a"),h={name:"DetailNavBar",components:{NavBar:f["a"]},data:function(){return{titles:["商品","参数","评价","推荐"],currentIndex:0}},methods:{handleClick:function(t){this.currentIndex=t,this.$emit("titleClick",t)},back:function(){this.$router.go(-1)}}},m=h,p=(s("36b8"),s("2877")),v=Object(p["a"])(m,d,u,!1,null,"7e363709",null),g=v.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("swiper",t._l(t.topImage,(function(e,i){return s("swiper-item",{key:i,ref:"item"+i,refInFor:!0,staticClass:"item"},[s("img",{attrs:{src:e,alt:""},on:{click:function(e){return t.showBigImg(i)}}})])})),1)},_=[],C=s("dc2c"),I={name:"DetailSwiper",components:{Swiper:C["a"],SwiperItem:C["b"]},props:{topImage:{type:Array,default:function(){return[]}}},data:function(){return{isShow:!1,currentIndex:0}},methods:{showBigImg:function(t){this.currentIndex=t,this.isShow?(this.$refs["item"+t][0].$el.style.height="300px",this.isShow=!1):(this.$refs["item"+t][0].$el.style.height="100vh",this.isShow=!0)}}},T=I,w=(s("76a1"),Object(p["a"])(T,b,_,!1,null,"45ad5c91",null)),y=w.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.goods).length?s("div",{attrs:{id:"detail-info"}},[s("p",{staticClass:"detail-info-title"},[t._v(t._s(t.goods.title))]),s("div",[s("span",{staticClass:"price"},[t._v(t._s(t.goods.price))]),s("span",{staticClass:"old-price"},[t._v(t._s(t.goods.oldPrice))]),s("span",{staticClass:"discountDesc",style:{backgroundColor:t.goods.discountDesc?"#f13e3a":"white"}},[t._v(t._s(t.goods.discountDesc))])]),s("div",{staticClass:"info"},[s("div",{staticClass:"sell"},[t._v(t._s(t.goods.sellNum))]),s("div",{staticClass:"fav"},[t._v(t._s(t.goods.fav))]),s("div",{staticClass:"serviceInfo"},[t._v(t._s(t.goods.serviceInfo))])]),s("div",{staticClass:"services"},t._l(t.goods.services.length-1,(function(e){return s("span",[s("img",{attrs:{src:"http://"+t.goods.services[e].icon,alt:""}}),t._v(" "+t._s(t.goods.services[e].name)+" ")])})),0)]):t._e()},$=[],k={name:"DetailInfo",props:{goods:{type:Object,default:function(){return{}}}},created:function(){}},O=k,S=(s("d3e5"),Object(p["a"])(O,x,$,!1,null,"bcf1db60",null)),D=S.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.shop).length?s("div",{attrs:{id:"detail-shop"}},[s("div",{staticClass:"detail-shop-title"},[s("img",{attrs:{src:t.shop.shopLogo,alt:""}}),s("div",[t._v(t._s(t.shop.name))])]),s("div",{staticClass:"d-sell-num-info"},[s("table",{staticClass:"d-table-1"},[s("tr",[s("td",[s("div",[t._v(t._s(t.shop.cSells))])]),s("td",[s("div",[t._v(t._s(t.shop.cGoods))])])]),t._m(0)]),s("table",{staticClass:"d-table-2"},t._l(t.shop.score.length,(function(e){return s("tr",[s("td",[t._v(t._s(t.shop.score[e-1].name))]),s("td",{style:{color:t.shop.score[e-1].isBetter?"red":"green"}},[t._v(t._s(t.shop.score[e-1].score))]),s("td",{style:{color:"white",backgroundColor:t.shop.score[e-1].isBetter?"red":"green"}},[t._v(t._s(t._f("highOrLow")(t.shop.score[e-1].isBetter)))])])})),0),s("div",{staticClass:"shopInput clearfix"},[s("div",[s("a",{attrs:{href:t.shop.shopUrl}},[t._v("进店逛逛")])])])])]):t._e()},B=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v("总销量")]),s("td",[t._v("全部宝贝")])])}],N={name:"DetailShop",props:{shop:{type:Object,default:function(){return{}}}},data:function(){return{}},created:function(){},filters:{highOrLow:function(t){var e="";return e=t?"高":"低",e}}},E=N,P=(s("8830"),Object(p["a"])(E,j,B,!1,null,"20cffcf1",null)),L=P.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.info).length?s("div",{attrs:{id:"d-products"}},t._l(t.info.detailImage[0].list,(function(e,i){return s("div",{key:i},[s("img",{staticClass:"d-p-img",attrs:{src:"http://"+e,alt:""},on:{load:function(e){return t.dpImgLoad(i)}}})])})),0):t._e()},R=[],M={name:"DetailProducts",props:{info:{type:Object,default:function(){return{}}}},methods:{dpImgLoad:function(t){this.$emit("dpImgLoad")}}},X=M,G=(s("f241"),Object(p["a"])(X,W,R,!1,null,"d02f4052",null)),A=G.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.iparams).length?s("div",{attrs:{id:"d-params"}},[s("table",{staticClass:"d-p-table"},t._l(t.iparams.tables[0],(function(e,i){return s("tr",[t._l(e,(function(e){return s("td",[t._v(t._s(e))])})),t.iparams.tables[1]?s("td",[t._v(t._s(t.iparams.tables[1][i][1]))]):t._e()],2)})),0),s("table",{staticClass:"d-p-table"},t._l(t.iparams.set,(function(e,i){return s("tr",[s("td",{staticClass:"d-p-key"},[t._v(t._s(e.key))]),s("td",{staticClass:"d-p-value",style:{color:"rgb(255,119,155)"}},[t._v(t._s(e.value))])])})),0)]):t._e()},U=[],J={name:"DetailParams",props:{iparams:Object}},q=J,H=(s("274c"),Object(p["a"])(q,F,U,!1,null,"ed8641f8",null)),z=H.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"d-comments"}},[t._m(0),s("div",{staticClass:"d-c-content"},[s("img",{staticClass:"d-c-avatar",attrs:{src:t.comments.userAvatar,alt:""}}),s("span",[t._v(t._s(t.comments.userName))]),s("div",{staticClass:"comments-content"},[t._v(" "+t._s(t.comments.content)+" ")]),s("div",{staticClass:"d-c-time-style"},[t._v(" "+t._s(new Date(1e3*t.comments.createdTime).toLocaleDateString())+" "+t._s(t.comments.style)+" ")]),t._l(t.comments.imgs,(function(e){return s("img",{staticClass:"d-c-img",attrs:{src:"http:"+e,alt:""},on:{load:t.loadRefresh}})}))],2),s("div",[t._v(" i Have nothing ")])])},Q=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-c-title"},[i("div",{staticClass:"user-comments"},[t._v("用户评价")]),i("a",{attrs:{href:"#"}},[t._v("更多"),i("img",{staticClass:"d-comments-img",attrs:{src:s("7a74"),alt:""}})])])}],V={name:"DetailComment",props:{comments:{type:Object,default:function(){return{}}}},methods:{loadRefresh:function(){this.$emit("commentImgRefresh")}}},Y=V,Z=(s("19dd"),Object(p["a"])(Y,K,Q,!1,null,"9ceffd1a",null)),tt=Z.exports,et=s("9287"),st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-bar"},[t._m(0),s("div",{staticClass:"bar-item bar-right"},[s("div",{staticClass:"cart",on:{click:t.addToCart}},[t._v("加入购物车")]),s("div",{staticClass:"buy"},[t._v("购买")])])])},it=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bar-item bar-left"},[s("div",[s("i",{staticClass:"icon service"}),s("span",{staticClass:"text"},[t._v("客服")])]),s("div",[s("i",{staticClass:"icon shop"}),s("span",{staticClass:"text"},[t._v("店铺")])]),s("div",[s("i",{staticClass:"icon select"}),s("span",{staticClass:"text"},[t._v("收藏")])])])}],nt={name:"DetailBottomBar",methods:{addToCart:function(){this.$emit("addToCart")}}},at=nt,ot=(s("e331"),Object(p["a"])(at,st,it,!1,null,"ee5e469e",null)),rt=ot.exports,ct={name:"Detail",components:{Scroll:c["a"],DetailNavBar:g,DetailSwiper:y,DetailInfo:D,DetailShop:L,DetailProducts:A,DetailParams:z,DetailComment:tt,GoodsList:et["a"],DetailBottomBar:rt},mixins:[l["a"]],data:function(){return{iid:null,topImage:[],goods:{},shop:{},info:{},dpImgLoadFunc:"",iparams:{},comments:{},goodsList:{pop:{page:0,list:[]}},productsOffsetTop:0,commentsOffsetTop:0,recommendsOffsetTop:0}},created:function(){var t=this;this.iid=this.$route.query.iid,Object(o["c"])(this.iid).then((function(e){console.log(e),t.topImage=e.data.result.itemInfo.topImages,t.goods=new o["a"](e.data.result.columns,e.data.result.itemInfo,e.data.result.shopInfo.services),t.shop=new o["b"](e.data.result.shopInfo),t.info=e.data.result.detailInfo,t.iparams=new o["e"](e.data.result.itemParams),t.comments=new o["f"](e.data.result.rate)})),this.getDetailGoods("pop")},mounted:function(){this.dpImgLoadFunc=Object(r["a"])(this.$refs.dScroll.refresh,200),this.$refs.dComments.$el.style.opacity=0},methods:{dpImgLoad:function(){this.$refs.dScroll.refresh(),this.$refs.dComments.$el.style.opacity=1,this.productsOffsetTop=this.$refs.dParams.$el.offsetTop,this.commentsOffsetTop=this.$refs.dComments.$el.offsetTop,this.recommendsOffsetTop=this.$refs.dRecommends.offsetTop},commentImgRefresh:function(){this.$refs.dScroll.refresh()},getDetailGoods:function(t){var e=this;this.goodsList[t]["page"]+=1,Object(o["d"])(t,this.goodsList[t]["page"]).then((function(s){var i;console.log(s),(i=e.goodsList[t]["list"]).push.apply(i,Object(a["a"])(s.data.data.list))}))},titleClick:function(t){switch(t){case 0:this.$refs.dScroll.scrollTo(0,0,0);break;case 1:this.$refs.dScroll.scrollTo(0,-this.productsOffsetTop,0);break;case 2:this.$refs.dScroll.scrollTo(0,-this.commentsOffsetTop,0);break;case 3:this.$refs.dScroll.scrollTo(0,-this.recommendsOffsetTop,0)}},detailScrolling:function(t){this.showBackToTop=Math.abs(t.y)>1e3,t.y<=-this.recommendsOffsetTop?this.$refs.dNavBar.currentIndex=3:t.y>-this.recommendsOffsetTop&&t.y<=-this.commentsOffsetTop?this.$refs.dNavBar.currentIndex=2:t.y>-this.commentsOffsetTop&&t.y<=-this.productsOffsetTop?this.$refs.dNavBar.currentIndex=1:this.$refs.dNavBar.currentIndex=0},back:function(){this.$refs.dScroll.scrollTo(0,0,200)},addToCart:function(){var t=this,e={};e.title=this.goods.title,e.img=this.goods.topImage,e.price=this.goods.lowNowPrice,e.iid=this.iid,e.count=1,e.shopName=this.shop.name,console.log(e),this.$store.dispatch("addCartProducts",e).then((function(e){console.log(e),t.$toast.show(e)}))}}},lt=ct,dt=(s("80c3"),Object(p["a"])(lt,i,n,!1,null,"029c6032",null));e["default"]=dt.exports},"76a1":function(t,e,s){"use strict";var i=s("bc8b"),n=s.n(i);n.a},"7a74":function(t,e,s){t.exports=s.p+"img/back.d5a990cc.svg"},"80c3":function(t,e,s){"use strict";var i=s("aaff"),n=s.n(i);n.a},"81d3":function(t,e,s){},8830:function(t,e,s){"use strict";var i=s("fcb3"),n=s.n(i);n.a},"8a35":function(t,e,s){},"90b9":function(t,e,s){"use strict";function i(t,e){var s=this,i=null;return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];i&&clearTimeout(i),i=setTimeout((function(){t.apply(s,a)}),e)}}s.d(e,"a",(function(){return i}))},aaff:function(t,e,s){},aeed:function(t,e,s){"use strict";var i=s("2d80"),n=s.n(i);n.a},b0c0:function(t,e,s){var i=s("83ab"),n=s("9bf2").f,a=Function.prototype,o=a.toString,r=/^\s*function ([^ (]*)/,c="name";!i||c in a||n(a,c,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},bc8b:function(t,e,s){},be42:function(t,e,s){},beb4:function(t,e,s){},d3e5:function(t,e,s){"use strict";var i=s("4a22"),n=s.n(i);n.a},dc2c:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"hy-swiper"}},[s("div",{ref:"hyswiper",staticClass:"swiper",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[t._t("default")],2),s("div",{staticClass:"indicator"},[t.showIndicator&&t.slideCount>1?t._t("indicator",t._l(t.slideCount,(function(e,i){return s("div",{key:i,staticClass:"indi-item",class:{active:i===t.currentIndex-1}})}))):t._e()],2)])},n=[],a=(s("a9e3"),{name:"Swiper",props:{interval:{type:Number,default:3e3},animDuration:{type:Number,default:300},moveRatio:{type:Number,default:.25},showIndicator:{type:Boolean,default:!0}},data:function(){return{slideCount:0,totalWidth:0,swiperStyle:{},currentIndex:1,scrolling:!1,startTime:0,endTime:0,startPosition:0,endPosition:0}},mounted:function(){var t=this;setTimeout((function(){t.handleDom(),t.startTimer()}),1e3)},methods:{startTimer:function(){var t=this;this.playTimer=window.setInterval((function(){t.currentIndex++,t.scrollContent(-t.currentIndex*t.totalWidth)}),this.interval)},stopTimer:function(){window.clearInterval(this.playTimer)},scrollContent:function(t){this.scrolling=!0,this.swiperStyle.transition="transform "+this.animDuration+"ms",this.setTransform(t),this.checkPosition(),this.scrolling=!1},checkPosition:function(){var t=this;window.setTimeout((function(){t.swiperStyle.transition="0ms",t.currentIndex>=t.slideCount+1?(t.currentIndex=1,t.setTransform(-t.currentIndex*t.totalWidth)):t.currentIndex<=0&&(t.currentIndex=t.slideCount,t.setTransform(-t.currentIndex*t.totalWidth)),t.$emit("transitionEnd",t.currentIndex-1)}),this.animDuration)},setTransform:function(t){this.swiperStyle.transform="translate3d(".concat(t,"px, 0, 0)"),this.swiperStyle["-webkit-transform"]="translate3d(".concat(t,"px), 0, 0"),this.swiperStyle["-ms-transform"]="translate3d(".concat(t,"px), 0, 0")},handleDom:function(){var t=this.$refs.hyswiper,e=t.getElementsByClassName("slide");if(this.slideCount=e.length,this.slideCount>1){var s=e[0].cloneNode(!0),i=e[this.slideCount-1].cloneNode(!0);t.insertBefore(i,e[0]),t.appendChild(s),this.totalWidth=t.offsetWidth,this.swiperStyle=t.style}this.setTransform(-this.totalWidth)},touchStart:function(t){this.startPosition=t.touches[0].pageX,this.scrolling||(this.stopTimer(),this.startX=t.touches[0].pageX)},touchMove:function(t){this.currentX=t.touches[0].pageX,this.distance=this.currentX-this.startX;var e=-this.currentIndex*this.totalWidth,s=this.distance+e;Math.abs(this.distance)>10&&this.setTransform(s)},touchEnd:function(t){this.endPosition=t.changedTouches[0].pageX;var e=this.endPosition-this.startPosition,s=Math.abs(this.distance);0!==s&&(this.distance>0&&s>this.totalWidth*this.moveRatio&&Math.abs(e)>10?this.currentIndex--:this.distance<0&&s>this.totalWidth*this.moveRatio&&Math.abs(e)>10&&this.currentIndex++,Math.abs(e)>10&&this.scrollContent(-this.currentIndex*this.totalWidth),this.startTimer())},previous:function(){this.changeItem(-1)},next:function(){this.changeItem(1)},changeItem:function(t){this.stopTimer(),this.currentIndex+=t,this.scrollContent(-this.currentIndex*this.totalWidth),this.startTimer()}}}),o=a,r=(s("1d45"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"8277f648",null),l=c.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slide"},[t._t("default")],2)},u=[],f={name:"Slide"},h=f,m=(s("e9df"),Object(r["a"])(h,d,u,!1,null,"1c0331f5",null)),p=m.exports;s.d(e,"a",(function(){return l})),s.d(e,"b",(function(){return p}))},e331:function(t,e,s){"use strict";var i=s("589d"),n=s.n(i);n.a},e47a:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar"},[s("div",{staticClass:"left"},[t._t("left")],2),s("div",{staticClass:"center"},[t._t("center")],2),s("div",{staticClass:"right"},[t._t("right")],2)])},n=[],a={name:"NavBar"},o=a,r=(s("aeed"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"5a490588",null);e["a"]=c.exports},e9df:function(t,e,s){"use strict";var i=s("39ea"),n=s.n(i);n.a},eecb:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"back-to-top"},[i("img",{attrs:{src:s("f3ff"),alt:""}})])}],a={name:"backToTop"},o=a,r=(s("2a51"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"eebd3cfa",null),l=c.exports;s.d(e,"a",(function(){return d}));var d={components:{backToTop:l},data:function(){return{showBackToTop:!1}},methods:{back:function(){this.$refs.scroll.scrollTo(0,0)}}}},f241:function(t,e,s){"use strict";var i=s("beb4"),n=s.n(i);n.a},f3ff:function(t,e,s){t.exports=s.p+"img/backToTop.cf89e122.svg"},fcb3:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1c66e91c.adbe8076.js.map